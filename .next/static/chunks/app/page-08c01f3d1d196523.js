(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4863:function(){},2963:function(){},1447:function(e,t,a){Promise.resolve().then(a.bind(a,5571))},5571:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return eo}});var s=a(288),r=a(5192),l=a(4506),n=a(667),i=a(5343),o=a(4396),d=a(2250),c=a(351),m=a(6641),u=a(8357),x=a(1831),g=a(7940),p=a(9773),h=a(7009);function f(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,h.m6)((0,p.W)(t))}let v=(0,g.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function b(e){let{className:t,variant:a,size:r,asChild:l=!1,...n}=e,i=l?x.g7:"button";return(0,s.jsx)(i,{"data-slot":"button",className:f(v({variant:a,size:r,className:t})),...n})}function j(e){let{children:t,onUploadClick:a,hasData:x,currentView:g="dashboard",onViewChange:p}=e,[h,f]=(0,r.useState)(!1);return(0,s.jsxs)("div",{className:"flex h-screen bg-background overflow-hidden",children:[x&&(0,s.jsxs)("aside",{className:"".concat(h?"w-20":"w-72"," glass-strong flex flex-col border-r border-border/50 relative transition-all duration-300"),children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-primary/5 via-transparent to-transparent pointer-events-none"}),(0,s.jsx)(b,{onClick:()=>f(!h),variant:"ghost",size:"icon",className:"absolute -right-3 top-6 z-10 w-6 h-6 rounded-full glass-strong border border-border/50 hover:border-primary/50 transition-all",children:h?(0,s.jsx)(l.Z,{className:"w-3 h-3 text-muted-foreground"}):(0,s.jsx)(n.Z,{className:"w-3 h-3 text-muted-foreground"})}),(0,s.jsx)("div",{className:"relative p-6 border-b border-border/50",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-xl gradient-orange flex items-center justify-center shadow-lg shadow-primary/20 flex-shrink-0",children:(0,s.jsx)(i.Z,{className:"w-7 h-7 text-primary-foreground"})}),!h&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-bold text-foreground tracking-tight",children:"RTS Monitor"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground font-medium",children:"Enterprise Analytics"})]})]})}),(0,s.jsxs)("nav",{className:"relative flex-1 p-4 space-y-2",children:[(0,s.jsxs)("button",{onClick:()=>null==p?void 0:p("dashboard"),className:"w-full flex items-center gap-3 ".concat(h?"justify-center px-0":"px-4"," py-3 rounded-xl ").concat("dashboard"===g?"gradient-orange text-primary-foreground shadow-lg shadow-primary/20":"text-muted-foreground hover:bg-secondary/50 hover:text-foreground"," transition-all font-medium"),children:[(0,s.jsx)(o.Z,{className:"w-5 h-5 flex-shrink-0"}),!h&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"Dashboard"}),"dashboard"===g&&(0,s.jsx)(d.Z,{className:"w-4 h-4 ml-auto"})]})]}),(0,s.jsxs)("button",{onClick:a,className:"w-full flex items-center gap-3 ".concat(h?"justify-center px-0":"px-4"," py-3 rounded-xl text-muted-foreground hover:bg-secondary/50 hover:text-foreground transition-all font-medium"),children:[(0,s.jsx)(c.Z,{className:"w-5 h-5 flex-shrink-0"}),!h&&(0,s.jsx)("span",{children:"Upload Data"})]}),(0,s.jsxs)("button",{onClick:()=>null==p?void 0:p("performance"),className:"w-full flex items-center gap-3 ".concat(h?"justify-center px-0":"px-4"," py-3 rounded-xl ").concat("performance"===g?"gradient-orange text-primary-foreground shadow-lg shadow-primary/20":"text-muted-foreground hover:bg-secondary/50 hover:text-foreground"," transition-all font-medium"),children:[(0,s.jsx)(d.Z,{className:"w-5 h-5 flex-shrink-0"}),!h&&(0,s.jsx)("span",{children:"Performance Report"})]}),(0,s.jsxs)("button",{onClick:()=>null==p?void 0:p("analytical"),className:"w-full flex items-center gap-3 ".concat(h?"justify-center px-0":"px-4"," py-3 rounded-xl ").concat("analytical"===g?"gradient-orange text-primary-foreground shadow-lg shadow-primary/20":"text-muted-foreground hover:bg-secondary/50 hover:text-foreground"," transition-all font-medium"),children:[(0,s.jsx)(m.Z,{className:"w-5 h-5 flex-shrink-0"}),!h&&(0,s.jsx)("span",{children:"Analytical Report"})]}),(0,s.jsxs)("button",{onClick:()=>null==p?void 0:p("financial"),className:"w-full flex items-center gap-3 ".concat(h?"justify-center px-0":"px-4"," py-3 rounded-xl ").concat("financial"===g?"gradient-orange text-primary-foreground shadow-lg shadow-primary/20":"text-muted-foreground hover:bg-secondary/50 hover:text-foreground"," transition-all font-medium"),children:[(0,s.jsx)(u.Z,{className:"w-5 h-5 flex-shrink-0"}),!h&&(0,s.jsx)("span",{children:"Financial Impact Report"})]})]}),!h&&(0,s.jsx)("div",{className:"relative p-6 border-t border-border/50",children:(0,s.jsxs)("div",{className:"glass rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-xs font-semibold text-primary mb-2",children:"COVERAGE AREAS"}),(0,s.jsxs)("div",{className:"space-y-1 text-xs text-muted-foreground",children:[(0,s.jsxs)("p",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:"Luzon"}),(0,s.jsx)("span",{className:"text-foreground font-medium",children:"Active"})]}),(0,s.jsxs)("p",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:"Visayas"}),(0,s.jsx)("span",{className:"text-foreground font-medium",children:"Active"})]}),(0,s.jsxs)("p",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:"Mindanao"}),(0,s.jsx)("span",{className:"text-foreground font-medium",children:"Active"})]})]})]})})]}),(0,s.jsx)("main",{className:"flex-1 overflow-auto",children:t})]})}function N(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:f("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function y(e){let{className:t,type:a,...r}=e;return(0,s.jsx)("input",{type:a,"data-slot":"input",className:f("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...r})}var C=a(8734),w=a(8645),S=a(5753),E=a(6740),R=a(6086),D=a(9882),I=a(5516);function L(e){let{status:t,count:a,locations:l,colorClass:n}=e,i=(0,r.useMemo)(()=>Object.entries(l).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a}).slice(0,5).map(e=>{let[t,a]=e;return{location:t,count:a}}),[l]),o=["oklch(0.65 0.19 45)","oklch(0.68 0.17 50)","oklch(0.72 0.18 55)","oklch(0.75 0.15 60)","oklch(0.78 0.13 65)"];return(0,s.jsxs)("div",{className:"glass-strong rounded-2xl overflow-hidden border border-border/50 hover:border-primary/30 transition-all group",children:[(0,s.jsxs)("div",{className:"p-5 relative overflow-hidden ".concat(n),children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent"}),(0,s.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full blur-2xl"}),(0,s.jsx)("div",{className:"relative flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm font-semibold text-white/80 uppercase tracking-wider",children:t}),(0,s.jsxs)("div",{className:"flex items-baseline gap-2 mt-1",children:[(0,s.jsx)("span",{className:"text-3xl font-bold text-white",children:a.toLocaleString()}),(0,s.jsx)(d.Z,{className:"w-4 h-4 text-white/60"})]})]})})]}),(0,s.jsxs)("div",{className:"p-5",children:[(0,s.jsxs)("h6",{className:"text-xs font-bold text-primary uppercase tracking-wider mb-4 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-1 h-4 gradient-orange rounded-full"}),"Top Provinces"]}),i.length>0?(0,s.jsx)(C.h,{width:"100%",height:200,children:(0,s.jsxs)(w.v,{data:i,margin:{top:10,right:10,left:-20,bottom:60},children:[(0,s.jsx)(S.K,{dataKey:"location",tick:{fontSize:11,fill:"oklch(0.65 0.01 0)"},angle:-45,textAnchor:"end",height:80,stroke:"oklch(0.25 0.01 0 / 0.3)"}),(0,s.jsx)(E.B,{tick:{fontSize:11,fill:"oklch(0.65 0.01 0)"},stroke:"oklch(0.25 0.01 0 / 0.3)"}),(0,s.jsx)(R.u,{contentStyle:{backgroundColor:"oklch(0.12 0.01 0 / 0.95)",border:"1px solid oklch(0.25 0.01 0 / 0.5)",borderRadius:"0.75rem",color:"oklch(0.98 0 0)",backdropFilter:"blur(12px)"},labelStyle:{color:"oklch(0.65 0.19 45)"}}),(0,s.jsx)(D.$,{dataKey:"count",radius:[8,8,0,0],children:i.map((e,t)=>(0,s.jsx)(I.b,{fill:o[t%o.length]},"cell-".concat(t)))})]})}):(0,s.jsx)("div",{className:"h-[200px] flex items-center justify-center",children:(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No data available"})})]})]})}let T=["DELIVERED","ONDELIVERY","PICKUP","INTRANSIT","CANCELLED","DETAINED","PROBLEMATIC","RETURNED"],A={DELIVERED:"from-green-500 to-green-600",ONDELIVERY:"from-blue-500 to-blue-600",PICKUP:"from-purple-500 to-purple-600",INTRANSIT:"from-orange-500 to-orange-600",CANCELLED:"from-red-500 to-red-600",DETAINED:"from-gray-600 to-gray-700",PROBLEMATIC:"from-orange-600 to-orange-700",RETURNED:"from-cyan-500 to-cyan-600"};function k(e){let{data:t,currentRegion:a,onRegionChange:l,filter:n,onFilterChange:i}=e,[o,d]=(0,r.useState)("all"),[c,m]=(0,r.useState)(""),u=(0,r.useMemo)(()=>t[a],[t,a]),x=(0,r.useMemo)(()=>{if("all"===n.type)return u;let e=u.data.filter(e=>{if("province"===n.type)return e.province.toLowerCase().includes(n.value.toLowerCase());if("month"===n.type){let t;if(!e.date)return!1;try{let a;if(a=new Date("number"==typeof e.date?Date.UTC(1899,11,30)+864e5*e.date:e.date.toString().trim()),isNaN(a.getTime())){let a=e.date.toString().split(" ")[0].split("-");t=Number.parseInt(a[1],10)}else t=a.getMonth()+1}catch(a){t=Number.parseInt(e.date.toString().split(" ")[0].split("-")[1],10)}return t===Number.parseInt(n.value,10)}if("year"===n.type){let t;if(!e.date)return!1;try{let a;if(a=new Date("number"==typeof e.date?Date.UTC(1899,11,30)+864e5*e.date:e.date.toString().trim()),isNaN(a.getTime())){let a=e.date.toString().split(" ")[0].split("-");t=Number.parseInt(a[0],10)}else t=a.getFullYear()}catch(a){t=Number.parseInt(e.date.toString().split(" ")[0].split("-")[0],10)}return t===Number.parseInt(n.value,10)}return!0}),t={},a={},s={},r=0,l={},i={};return T.forEach(e=>{t[e]={count:0,locations:{}}}),e.forEach(e=>{r++;let n=e.normalizedStatus,o=e.province,d=e.region;T.includes(n)&&(t[n].count++,t[n].locations[o]=(t[n].locations[o]||0)+1),a[o]=(a[o]||0)+1,s[d]=(s[d]||0)+1,"DELIVERED"===n&&(l[e.shipper]=(l[e.shipper]||0)+1),["CANCELLED","PROBLEMATIC","RETURNED"].includes(n)&&(i[e.shipper]=(i[e.shipper]||0)+1)}),{data:e,stats:t,provinces:a,regions:s,total:r,winningShippers:l,rtsShippers:i}},[u,n]),g="all"===n.type?u:x,p=(0,r.useMemo)(()=>{let e=g.stats.CANCELLED.count+g.stats.PROBLEMATIC.count+g.stats.RETURNED.count;return g.total>0?(e/g.total*100).toFixed(2):"0.00"},[g]),h=(0,r.useMemo)(()=>Object.entries(g.provinces).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a}).slice(0,5),[g]),f=(0,r.useMemo)(()=>Object.entries(g.regions).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a}).slice(0,5),[g]),v=(0,r.useMemo)(()=>{let e={};return["CANCELLED","PROBLEMATIC","RETURNED"].forEach(t=>{for(let[a,s]of Object.entries(g.stats[t].locations))e[a]=(e[a]||0)+s}),Object.entries(e).sort((e,t)=>t[1]-e[1]).slice(0,5)},[g]),j=(0,r.useMemo)(()=>Object.entries(g.winningShippers).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a}).slice(0,5),[g]),C=(0,r.useMemo)(()=>Object.entries(g.rtsShippers).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a}).slice(0,5),[g]),w="all"===a?"All Regions":a.charAt(0).toUpperCase()+a.slice(1);return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(b,{variant:"all"===a?"default":"outline",onClick:()=>l("all"),className:"font-medium",children:"All Regions"}),(0,s.jsx)(b,{variant:"luzon"===a?"default":"outline",onClick:()=>l("luzon"),className:"font-medium",children:"Luzon"}),(0,s.jsx)(b,{variant:"visayas"===a?"default":"outline",onClick:()=>l("visayas"),className:"font-medium",children:"Visayas"}),(0,s.jsx)(b,{variant:"mindanao"===a?"default":"outline",onClick:()=>l("mindanao"),className:"font-medium",children:"Mindanao"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-foreground",children:"Filter:"}),(0,s.jsxs)("select",{value:o,onChange:e=>{d(e.target.value),m("")},className:"px-3 py-1.5 text-sm bg-secondary border border-border rounded-md text-foreground",children:[(0,s.jsx)("option",{value:"all",children:"All"}),(0,s.jsx)("option",{value:"province",children:"Province"}),(0,s.jsx)("option",{value:"month",children:"Month"}),(0,s.jsx)("option",{value:"year",children:"Year"})]}),"province"===o&&(0,s.jsx)(y,{type:"text",placeholder:"Enter province name",value:c,onChange:e=>m(e.target.value),className:"w-48 h-9 text-sm"}),"month"===o&&(0,s.jsxs)("select",{value:c,onChange:e=>m(e.target.value),className:"px-3 py-1.5 text-sm bg-secondary border border-border rounded-md text-foreground",children:[(0,s.jsx)("option",{value:"",children:"Select month"}),Array.from({length:12},(e,t)=>(0,s.jsx)("option",{value:String(t+1).padStart(2,"0"),children:new Date(2e3,t).toLocaleString("default",{month:"long"})},t+1))]}),"year"===o&&(0,s.jsxs)("select",{value:c,onChange:e=>m(e.target.value),className:"px-3 py-1.5 text-sm bg-secondary border border-border rounded-md text-foreground",children:[(0,s.jsx)("option",{value:"",children:"Select year"}),Array.from({length:new Date().getFullYear()-1999},(e,t)=>(0,s.jsx)("option",{value:String(2e3+t),children:2e3+t},2e3+t))]}),(0,s.jsx)(b,{size:"sm",onClick:()=>{if("all"!==o&&!c){alert("Please enter or select a value to filter.");return}i({type:o,value:c})},className:"h-9",children:"Apply"}),(0,s.jsx)(b,{size:"sm",variant:"outline",onClick:()=>{d("all"),m(""),i({type:"all",value:""})},className:"h-9 bg-transparent",children:"Clear"})]})]}),(0,s.jsx)(N,{className:"p-6 mb-6 bg-gradient-to-br from-purple-600 to-purple-800 text-white",children:(0,s.jsxs)("div",{className:"grid grid-cols-6 gap-4",children:[(0,s.jsxs)("div",{className:"col-span-1",children:[(0,s.jsxs)("h3",{className:"text-xl font-bold mb-2",children:[w," Dashboard"]}),(0,s.jsxs)("p",{className:"text-sm",children:["Total Parcels: ",(0,s.jsx)("strong",{className:"text-lg",children:g.total.toLocaleString()})]}),(0,s.jsxs)("p",{className:"text-sm mt-1",children:["OVER ALL RTS Percentage: ",(0,s.jsxs)("strong",{className:"text-lg",children:[p,"%"]})]})]}),(0,s.jsxs)("div",{className:"col-span-1",children:[(0,s.jsx)("h5",{className:"font-semibold mb-2",children:"Top Provinces"}),(0,s.jsx)("div",{className:"space-y-1 text-sm max-h-32 overflow-y-auto",children:h.map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{children:[t,": ",(0,s.jsx)("strong",{children:a})]},t)})})]}),(0,s.jsxs)("div",{className:"col-span-1",children:[(0,s.jsx)("h5",{className:"font-semibold mb-2",children:"Regions"}),(0,s.jsx)("div",{className:"space-y-1 text-sm max-h-32 overflow-y-auto",children:f.map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{children:[t,": ",(0,s.jsx)("strong",{children:a})]},t)})})]}),(0,s.jsxs)("div",{className:"col-span-1",children:[(0,s.jsx)("h5",{className:"font-semibold mb-2",children:"Top RTS"}),(0,s.jsx)("div",{className:"space-y-1 text-sm max-h-32 overflow-y-auto",children:v.length>0?v.map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{children:[t,": ",(0,s.jsx)("strong",{children:a})]},t)}):(0,s.jsx)("div",{className:"text-sm",children:"No data"})})]}),(0,s.jsxs)("div",{className:"col-span-1",children:[(0,s.jsx)("h5",{className:"font-semibold mb-2",children:"Winning Products"}),(0,s.jsx)("div",{className:"space-y-1 text-sm max-h-32 overflow-y-auto",children:j.length>0?j.map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{children:[t,": ",(0,s.jsx)("strong",{children:a})]},t)}):(0,s.jsx)("div",{className:"text-sm",children:"No data"})})]}),(0,s.jsxs)("div",{className:"col-span-1",children:[(0,s.jsx)("h5",{className:"font-semibold mb-2",children:"RTS Products"}),(0,s.jsx)("div",{className:"space-y-1 text-sm max-h-32 overflow-y-auto",children:C.length>0?C.map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{children:[t,": ",(0,s.jsx)("strong",{children:a})]},t)}):(0,s.jsx)("div",{className:"text-sm",children:"No data"})})]})]})}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:T.map(e=>(0,s.jsx)(L,{status:e,count:g.stats[e].count,locations:g.stats[e].locations,colorClass:A[e]},e))})]})}var P=a(2642);function M(e){let{data:t,onDataChange:a,onUploadClick:l}=e,[n,o]=(0,r.useState)("all"),[m,u]=(0,r.useState)({type:"all",value:""});return(0,s.jsxs)("div",{className:"p-8 space-y-8 min-h-screen flex flex-col",children:[(0,s.jsxs)("div",{className:"relative text-center",children:[(0,s.jsx)("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-32 h-32 bg-primary/10 rounded-full blur-3xl"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("h2",{className:"text-4xl font-bold text-foreground tracking-tight mb-3 uppercase",children:"RTS Monitoring Dashboard"}),(0,s.jsx)("p",{className:"text-muted-foreground text-lg",children:"Enterprise-grade parcel tracking and analytics across Philippine regions"})]})]}),t&&(0,s.jsx)(k,{data:t,currentRegion:n,onRegionChange:o,filter:m,onFilterChange:u}),!t&&(0,s.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,s.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"glass-strong rounded-2xl p-12 text-center max-w-2xl mx-auto border border-border/50",children:[(0,s.jsxs)("div",{className:"relative inline-flex items-center justify-center w-24 h-24 mb-6",children:[(0,s.jsx)("div",{className:"absolute inset-0 gradient-orange rounded-2xl opacity-20 blur-xl"}),(0,s.jsx)("div",{className:"relative glass-strong rounded-2xl w-full h-full flex items-center justify-center border border-primary/30",children:(0,s.jsx)(P.Z,{className:"w-12 h-12 text-primary"})})]}),(0,s.jsx)("h3",{className:"text-2xl font-bold text-foreground mb-3",children:"Ready to Track Parcels"}),(0,s.jsx)("p",{className:"text-muted-foreground text-lg mb-6",children:"Upload your Excel data file to begin comprehensive analytics and monitoring"}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-6 text-sm text-muted-foreground mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d.Z,{className:"w-4 h-4 text-primary"}),(0,s.jsx)("span",{children:"Real-time Analytics"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.Z,{className:"w-4 h-4 text-primary"}),(0,s.jsx)("span",{children:"Regional Insights"})]})]}),(0,s.jsxs)(b,{onClick:l,size:"lg",className:"gradient-orange text-primary-foreground hover:opacity-90 shadow-lg shadow-primary/20 px-8",children:[(0,s.jsx)(c.Z,{className:"w-5 h-5 mr-2"}),"Upload & Process"]})]})}),(0,s.jsx)("div",{className:"mt-auto pt-12 pb-6 text-center",children:(0,s.jsx)("p",{className:"text-muted-foreground text-sm max-w-3xl mx-auto leading-relaxed",children:"Powered by advanced analytics and real-time data processing, the RTS Monitoring Dashboard delivers enterprise-level insights for optimized logistics operations across the Philippine archipelago. Streamline your parcel tracking workflow with intelligent regional analytics and comprehensive performance metrics."})})]})]})}var O=a(2352),F=a(7860),z=a(5814);function U(e){let{data:t}=e,[a,l]=(0,r.useState)("all"),[n,i]=(0,r.useState)({type:"all",value:""}),{filteredData:o,topProvinces:c,topShippers:m,topRTSDestinations:u,topRegionsSuccessDelivery:x,topRegionsHighRTS:g}=(0,r.useMemo)(()=>{if(!t)return{filteredData:null,topProvinces:[],topShippers:[],topRTSDestinations:[],topRegionsSuccessDelivery:[],topRegionsHighRTS:[]};let e="all"===a?t.all:t[a];if("all"===n.type){let t=e.data,a={},s={};t.forEach(e=>{a[e.province]=(a[e.province]||0)+1,s[e.shipper]=(s[e.shipper]||0)+1});let r=["CANCELLED","PROBLEMATIC","RETURNED"],l={};t.filter(e=>r.includes(e.normalizedStatus)).forEach(e=>{l[e.province]=(l[e.province]||0)+1});let n=Object.entries(a).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a}).slice(0,10),i=Object.entries(s).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a}).slice(0,10),o=Object.entries(l).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a}).slice(0,10),d=t.filter(e=>"Luzon"===e.island).length,c=t.filter(e=>"Visayas"===e.island).length,m=t.filter(e=>"Mindanao"===e.island).length,u={};["Luzon","Visayas","Mindanao"].forEach(e=>{let a=t.filter(t=>t.island===e),s=a.filter(e=>"DELIVERED"===e.normalizedStatus).length,l=a.filter(e=>r.includes(e.normalizedStatus)).length;u[e]={total:a.length,delivered:s,rts:l}});let x=Object.entries(u).map(e=>{let[t,a]=e;return{region:t,rate:a.total>0?a.delivered/a.total*100:0,count:a.delivered}}).sort((e,t)=>t.rate-e.rate).slice(0,5),g=Object.entries(u).map(e=>{let[t,a]=e;return{region:t,rate:a.total>0?a.rts/a.total*100:0,count:a.rts}}).sort((e,t)=>t.rate-e.rate).slice(0,5);return{filteredData:{luzonTotal:d,visayasTotal:c,mindanaoTotal:m,total:t.length},topProvinces:n,topShippers:i,topRTSDestinations:o,topRegionsSuccessDelivery:x,topRegionsHighRTS:g}}let s=e.data.filter(e=>{if("province"===n.type)return e.province.toLowerCase().includes(n.value.toLowerCase());if("month"===n.type){let t;if(!e.date)return!1;try{let a;if(a=new Date("number"==typeof e.date?Date.UTC(1899,11,30)+864e5*e.date:e.date.toString().trim()),isNaN(a.getTime())){let a=e.date.toString().split(" ")[0].split("-");t=Number.parseInt(a[1],10)}else t=a.getMonth()+1}catch(a){t=Number.parseInt(e.date.toString().split(" ")[0].split("-")[1],10)}return t===Number.parseInt(n.value,10)}if("year"===n.type){let t;if(!e.date)return!1;try{let a;if(a=new Date("number"==typeof e.date?Date.UTC(1899,11,30)+864e5*e.date:e.date.toString().trim()),isNaN(a.getTime())){let a=e.date.toString().split(" ")[0].split("-");t=Number.parseInt(a[0],10)}else t=a.getFullYear()}catch(a){t=Number.parseInt(e.date.toString().split(" ")[0].split("-")[0],10)}return t===Number.parseInt(n.value,10)}return!0}),r={},l={};s.forEach(e=>{r[e.province]=(r[e.province]||0)+1,l[e.shipper]=(l[e.shipper]||0)+1});let i=["CANCELLED","PROBLEMATIC","RETURNED"],o={};s.filter(e=>i.includes(e.normalizedStatus)).forEach(e=>{o[e.province]=(o[e.province]||0)+1});let d=Object.entries(r).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a}).slice(0,10),c=Object.entries(l).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a}).slice(0,10),m=Object.entries(o).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a}).slice(0,10),u=s.filter(e=>"Luzon"===e.island).length,x=s.filter(e=>"Visayas"===e.island).length,g=s.filter(e=>"Mindanao"===e.island).length,p={};["Luzon","Visayas","Mindanao"].forEach(e=>{let t=s.filter(t=>t.island===e),a=t.filter(e=>"DELIVERED"===e.normalizedStatus).length,r=t.filter(e=>i.includes(e.normalizedStatus)).length;p[e]={total:t.length,delivered:a,rts:r}});let h=Object.entries(p).map(e=>{let[t,a]=e;return{region:t,rate:a.total>0?a.delivered/a.total*100:0,count:a.delivered}}).sort((e,t)=>t.rate-e.rate).slice(0,5),f=Object.entries(p).map(e=>{let[t,a]=e;return{region:t,rate:a.total>0?a.rts/a.total*100:0,count:a.rts}}).sort((e,t)=>t.rate-e.rate).slice(0,5);return{filteredData:{luzonTotal:u,visayasTotal:x,mindanaoTotal:g,total:s.length},topProvinces:d,topShippers:c,topRTSDestinations:m,topRegionsSuccessDelivery:h,topRegionsHighRTS:f}},[t,a,n]);return t?((0,r.useMemo)(()=>{if(!t)return"0.00";let e="all"===a?t.all:t[a],s=e.data.filter(e=>"DELIVERED"===e.normalizedStatus).length,r=e.data.length;return r>0?(s/r*100).toFixed(2):"0.00"},[t,a]),(0,r.useMemo)(()=>{if(!t)return"0.00";let e="all"===a?t.all:t[a],s=["CANCELLED","PROBLEMATIC","RETURNED"],r=e.data.filter(e=>s.includes(e.normalizedStatus)).length,l=e.data.length;return l>0?(r/l*100).toFixed(2):"0.00"},[t,a]),(0,s.jsxs)("div",{className:"p-8 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"PERFORMANCE REPORT"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Comprehensive delivery and operational performance metrics"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(b,{variant:"all"===a?"default":"outline",onClick:()=>l("all"),className:"font-medium",children:"All Regions"}),(0,s.jsx)(b,{variant:"luzon"===a?"default":"outline",onClick:()=>l("luzon"),className:"font-medium",children:"Luzon"}),(0,s.jsx)(b,{variant:"visayas"===a?"default":"outline",onClick:()=>l("visayas"),className:"font-medium",children:"Visayas"}),(0,s.jsx)(b,{variant:"mindanao"===a?"default":"outline",onClick:()=>l("mindanao"),className:"font-medium",children:"Mindanao"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-foreground",children:"Filter:"}),(0,s.jsxs)("select",{value:n.type,onChange:e=>{i({type:e.target.value,value:""})},className:"px-3 py-1.5 text-sm bg-secondary border border-border rounded-md text-foreground",children:[(0,s.jsx)("option",{value:"all",children:"All"}),(0,s.jsx)("option",{value:"province",children:"Province"}),(0,s.jsx)("option",{value:"month",children:"Month"}),(0,s.jsx)("option",{value:"year",children:"Year"})]}),"province"===n.type&&(0,s.jsx)(y,{type:"text",placeholder:"Enter province name",value:n.value,onChange:e=>i({...n,value:e.target.value}),className:"w-48 h-9 text-sm"}),"month"===n.type&&(0,s.jsxs)("select",{value:n.value,onChange:e=>i({...n,value:e.target.value}),className:"px-3 py-1.5 text-sm bg-secondary border border-border rounded-md text-foreground",children:[(0,s.jsx)("option",{value:"",children:"Select month"}),Array.from({length:12},(e,t)=>(0,s.jsx)("option",{value:String(t+1).padStart(2,"0"),children:new Date(2e3,t).toLocaleString("default",{month:"long"})},t+1))]}),"year"===n.type&&(0,s.jsxs)("select",{value:n.value,onChange:e=>i({...n,value:e.target.value}),className:"px-3 py-1.5 text-sm bg-secondary border border-border rounded-md text-foreground",children:[(0,s.jsx)("option",{value:"",children:"Select year"}),Array.from({length:new Date().getFullYear()-1999},(e,t)=>(0,s.jsx)("option",{value:String(2e3+t),children:2e3+t},2e3+t))]}),(0,s.jsx)(b,{size:"sm",onClick:()=>{if("all"!==n.type&&!n.value){alert("Please enter or select a value to filter.");return}},className:"h-9",children:"Apply"}),(0,s.jsx)(b,{size:"sm",variant:"outline",onClick:()=>i({type:"all",value:""}),className:"h-9 bg-transparent",children:"Clear"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"glass rounded-xl p-6 border border-border/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)(O.Z,{className:"w-6 h-6 text-primary"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"Luzon"})]}),(0,s.jsx)("p",{className:"text-3xl font-bold text-foreground mb-2",children:(null==o?void 0:o.luzonTotal.toLocaleString())||0}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Parcels"})]}),(0,s.jsxs)("div",{className:"glass rounded-xl p-6 border border-border/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)(O.Z,{className:"w-6 h-6 text-primary"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"Visayas"})]}),(0,s.jsx)("p",{className:"text-3xl font-bold text-foreground mb-2",children:(null==o?void 0:o.visayasTotal.toLocaleString())||0}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Parcels"})]}),(0,s.jsxs)("div",{className:"glass rounded-xl p-6 border border-border/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)(O.Z,{className:"w-6 h-6 text-primary"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"Mindanao"})]}),(0,s.jsx)("p",{className:"text-3xl font-bold text-foreground mb-2",children:(null==o?void 0:o.mindanaoTotal.toLocaleString())||0}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Parcels"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"glass rounded-xl p-6 border border-border/50",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Top 10 Provinces"}),(0,s.jsx)("div",{className:"space-y-3",children:c.map((e,t)=>{let[a,r]=e;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-secondary/30",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:"text-sm font-bold text-primary w-6",children:["#",t+1]}),(0,s.jsx)("span",{className:"text-sm font-medium text-foreground",children:a})]}),(0,s.jsx)("span",{className:"text-sm font-bold text-foreground",children:r.toLocaleString()})]},a)})})]}),(0,s.jsxs)("div",{className:"glass rounded-xl p-6 border border-border/50",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Top 10 Shippers"}),(0,s.jsx)("div",{className:"space-y-3",children:m.map((e,t)=>{let[a,r]=e;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-secondary/30",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:"text-sm font-bold text-primary w-6",children:["#",t+1]}),(0,s.jsx)("span",{className:"text-sm font-medium text-foreground",children:a})]}),(0,s.jsx)("span",{className:"text-sm font-bold text-foreground",children:r.toLocaleString()})]},a)})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"glass rounded-xl p-6 border border-green-500/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)(d.Z,{className:"w-6 h-6 text-green-500"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"Top Regions - Success Delivery"})]}),(0,s.jsx)("div",{className:"space-y-3",children:x.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-green-500/10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:"text-sm font-bold text-green-500 w-6",children:["#",t+1]}),(0,s.jsx)("span",{className:"text-sm font-medium text-foreground",children:e.region})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("span",{className:"text-sm font-bold text-green-500",children:[e.rate.toFixed(2),"%"]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.count.toLocaleString()," delivered"]})]})]},e.region))})]}),(0,s.jsxs)("div",{className:"glass rounded-xl p-6 border border-red-500/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)(F.Z,{className:"w-6 h-6 text-red-500"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"Top Regions - High RTS Rate"})]}),(0,s.jsx)("div",{className:"space-y-3",children:g.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-red-500/10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:"text-sm font-bold text-red-500 w-6",children:["#",t+1]}),(0,s.jsx)("span",{className:"text-sm font-medium text-foreground",children:e.region})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("span",{className:"text-sm font-bold text-red-500",children:[e.rate.toFixed(2),"%"]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.count.toLocaleString()," RTS"]})]})]},e.region))})]})]}),(0,s.jsxs)("div",{className:"glass rounded-xl p-6 border border-red-500/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)(z.Z,{className:"w-6 h-6 text-red-500"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"Top 10 RTS Destinations"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:u.map((e,t)=>{let[a,r]=e;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-red-500/10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:"text-sm font-bold text-red-500 w-6",children:["#",t+1]}),(0,s.jsx)("span",{className:"text-sm font-medium text-foreground",children:a})]}),(0,s.jsx)("span",{className:"text-sm font-bold text-red-500",children:r.toLocaleString()})]},a)})})]})]})):(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(d.Z,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"No Data Available"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Upload data to view performance metrics"})]})})}var V=a(1258),B=a(368);function Z(e){let{data:t}=e,[a,l]=(0,r.useState)("all"),[n,o]=(0,r.useState)({type:"all",value:""}),{predictiveRiskData:c,rfmSegmentationData:u,geospatialData:x,abcAnalysisData:g}=(0,r.useMemo)(()=>{if(!t)return{predictiveRiskData:null,rfmSegmentationData:null,geospatialData:null,abcAnalysisData:null};let e="all"===a?t.all:t[a],s="all"===n.type?e.data:e.data.filter(e=>{if("province"===n.type)return e.province.toLowerCase().includes(n.value.toLowerCase());if("month"===n.type){let t;if(!e.date)return!1;try{let a;if(a=new Date("number"==typeof e.date?Date.UTC(1899,11,30)+864e5*e.date:e.date.toString().trim()),isNaN(a.getTime())){let a=e.date.toString().split(" ")[0].split("-");t=Number.parseInt(a[1],10)}else t=a.getMonth()+1}catch(a){t=Number.parseInt(e.date.toString().split(" ")[0].split("-")[1],10)}return t===Number.parseInt(n.value,10)}if("year"===n.type){let t;if(!e.date)return!1;try{let a;if(a=new Date("number"==typeof e.date?Date.UTC(1899,11,30)+864e5*e.date:e.date.toString().trim()),isNaN(a.getTime())){let a=e.date.toString().split(" ")[0].split("-");t=Number.parseInt(a[0],10)}else t=a.getFullYear()}catch(a){t=Number.parseInt(e.date.toString().split(" ")[0].split("-")[0],10)}return t===Number.parseInt(n.value,10)}return!0}),r={},l=["CANCELLED","PROBLEMATIC","RETURNED"];s.forEach(e=>{let t=e.province,a=e.shipper;r[t]||(r[t]={}),r[t][a]||(r[t][a]=0),l.includes(e.normalizedStatus)&&(r[t][a]+=1)});let i=Object.entries(r).map(e=>{let[t,a]=e;return{province:t,shippers:Object.entries(a).map(e=>{let[a,r]=e;return{shipper:a,returnProbability:r/s.filter(e=>e.province===t&&e.shipper===a).length}})}}),o={};s.forEach(e=>{let t=e.shipper;o[t]||(o[t]={recency:0,frequency:0,monetary:0}),o[t].frequency+=1,o[t].monetary+=1});let d=Object.entries(o).map(e=>{let[t,a]=e;return{customer:t,...a,segment:a.frequency>10?"High Value":a.frequency>5?"Medium Value":"Low Value"}}),c={};s.forEach(e=>{let t=e.province;c[t]||(c[t]={total:0,successful:0,avgTime:0}),c[t].total+=1,l.includes(e.normalizedStatus)||(c[t].successful+=1)});let m=Object.entries(c).map(e=>{let[t,a]=e;return{province:t,efficiency:a.successful/a.total,totalDeliveries:a.total,coordinates:{lat:0,lng:0}}}),u={};s.forEach(e=>{let t=e.shipper;u[t]||(u[t]={revenue:0,volume:0}),u[t].volume+=1,u[t].revenue+=1});let x=Object.entries(u).sort((e,t)=>{let[,a]=e,[,s]=t;return s.revenue-a.revenue}),g=x.reduce((e,t)=>{let[,a]=t;return e+a.revenue},0),p=0;return{predictiveRiskData:i,rfmSegmentationData:d,geospatialData:m,abcAnalysisData:x.map((e,t)=>{let[a,s]=e,r=(p+=s.revenue)/g*100,l="C";return r<=80?l="A":r<=95&&(l="B"),{shipper:a,revenue:s.revenue,volume:s.volume,category:l,cumulativePercentage:r}})}},[t,a,n]);return t?(0,s.jsxs)("div",{className:"p-8 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"ANALYTICAL REPORT"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Deep insights into regional distribution and shipper performance"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(b,{variant:"all"===a?"default":"outline",onClick:()=>l("all"),className:"font-medium",children:"All Regions"}),(0,s.jsx)(b,{variant:"luzon"===a?"default":"outline",onClick:()=>l("luzon"),className:"font-medium",children:"Luzon"}),(0,s.jsx)(b,{variant:"visayas"===a?"default":"outline",onClick:()=>l("visayas"),className:"font-medium",children:"Visayas"}),(0,s.jsx)(b,{variant:"mindanao"===a?"default":"outline",onClick:()=>l("mindanao"),className:"font-medium",children:"Mindanao"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-foreground",children:"Filter:"}),(0,s.jsxs)("select",{value:n.type,onChange:e=>{o({type:e.target.value,value:""})},className:"px-3 py-1.5 text-sm bg-secondary border border-border rounded-md text-foreground",children:[(0,s.jsx)("option",{value:"all",children:"All"}),(0,s.jsx)("option",{value:"province",children:"Province"}),(0,s.jsx)("option",{value:"month",children:"Month"}),(0,s.jsx)("option",{value:"year",children:"Year"})]}),"province"===n.type&&(0,s.jsx)(y,{type:"text",placeholder:"Enter province name",value:n.value,onChange:e=>o({...n,value:e.target.value}),className:"w-48 h-9 text-sm"}),"month"===n.type&&(0,s.jsxs)("select",{value:n.value,onChange:e=>o({...n,value:e.target.value}),className:"px-3 py-1.5 text-sm bg-secondary border border-border rounded-md text-foreground",children:[(0,s.jsx)("option",{value:"",children:"Select month"}),Array.from({length:12},(e,t)=>(0,s.jsx)("option",{value:String(t+1).padStart(2,"0"),children:new Date(2e3,t).toLocaleString("default",{month:"long"})},t+1))]}),"year"===n.type&&(0,s.jsxs)("select",{value:n.value,onChange:e=>o({...n,value:e.target.value}),className:"px-3 py-1.5 text-sm bg-secondary border border-border rounded-md text-foreground",children:[(0,s.jsx)("option",{value:"",children:"Select year"}),Array.from({length:new Date().getFullYear()-1999},(e,t)=>(0,s.jsx)("option",{value:String(2e3+t),children:2e3+t},2e3+t))]}),(0,s.jsx)(b,{size:"sm",onClick:()=>{if("all"!==n.type&&!n.value){alert("Please enter or select a value to filter.");return}},className:"h-9",children:"Apply"}),(0,s.jsx)(b,{size:"sm",variant:"outline",onClick:()=>o({type:"all",value:""}),className:"h-9 bg-transparent",children:"Clear"})]})]}),(0,s.jsxs)("div",{className:"glass rounded-xl p-6 border border-border/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)(d.Z,{className:"w-6 h-6 text-orange-500"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"Predictive Risk Dashboard"})]}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:"Return probability heatmap by province and shipper"}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("div",{className:"min-w-full",children:[(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-1 mb-2",children:[(0,s.jsx)("div",{className:"col-span-3"}),null==c?void 0:c.slice(0,8).map(e=>(0,s.jsx)("div",{className:"text-xs font-medium text-center text-foreground truncate",children:e.province},e.province))]}),null==c?void 0:c.slice(0,8).map(e=>(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-1 mb-1",children:[(0,s.jsx)("div",{className:"col-span-3 text-xs font-medium text-foreground truncate",children:e.province}),e.shippers.slice(0,8).map((e,t)=>(0,s.jsxs)("div",{className:"aspect-square rounded-sm flex items-center justify-center text-xs font-bold",style:{backgroundColor:"rgba(239, 68, 68, ".concat(Math.min(2*e.returnProbability,1),")"),color:e.returnProbability>.5?"white":"black"},children:[(100*e.returnProbability).toFixed(0),"%"]},e.shipper))]},e.province))]})})]}),(0,s.jsxs)("div",{className:"glass rounded-xl p-6 border border-border/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)(V.Z,{className:"w-6 h-6 text-blue-500"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"Customer Intelligence Matrix"})]}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:"RFM segmentation analysis"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:null==u?void 0:u.slice(0,9).map(e=>(0,s.jsxs)("div",{className:"p-4 rounded-lg bg-secondary/30",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-foreground truncate",children:e.customer}),(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-bold ".concat("High Value"===e.segment?"bg-green-500/20 text-green-700":"Medium Value"===e.segment?"bg-yellow-500/20 text-yellow-700":"bg-red-500/20 text-red-700"),children:e.segment})]}),(0,s.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Frequency:"}),(0,s.jsx)("span",{className:"font-bold",children:e.frequency})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Monetary:"}),(0,s.jsx)("span",{className:"font-bold",children:e.monetary})]})]})]},e.customer))})]}),(0,s.jsxs)("div",{className:"glass rounded-xl p-6 border border-border/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)(B.Z,{className:"w-6 h-6 text-green-500"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"Geospatial Optimization Map"})]}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:"Delivery efficiency by province"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:null==x?void 0:x.slice(0,12).map(e=>(0,s.jsxs)("div",{className:"p-4 rounded-lg bg-secondary/30",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-foreground",children:e.province}),(0,s.jsxs)("span",{className:"text-sm font-bold text-green-600",children:[(100*e.efficiency).toFixed(1),"%"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-2",children:(0,s.jsx)("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"".concat(100*e.efficiency,"%")}})}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:[e.totalDeliveries," total deliveries"]})]},e.province))})]}),(0,s.jsxs)("div",{className:"glass rounded-xl p-6 border border-border/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)(i.Z,{className:"w-6 h-6 text-purple-500"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"Portfolio Performance Grid"})]}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:"ABC analysis of shipper performance"}),(0,s.jsx)("div",{className:"space-y-3",children:null==g?void 0:g.slice(0,10).map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-secondary/30",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-bold ".concat("A"===e.category?"bg-green-500/20 text-green-700":"B"===e.category?"bg-yellow-500/20 text-yellow-700":"bg-red-500/20 text-red-700"),children:e.category}),(0,s.jsx)("span",{className:"text-sm font-medium text-foreground",children:e.shipper})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-sm font-bold text-foreground",children:e.revenue}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:[e.cumulativePercentage.toFixed(1),"% cumulative"]})]})]},e.shipper))})]})]}):(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(m.Z,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"No Data Available"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Upload data to view analytical insights"})]})})}var Y=a(918);function _(e){let{data:t}=e,[a,l]=(0,r.useState)("all"),[n,i]=(0,r.useState)({type:"all",value:""}),o=(0,r.useMemo)(()=>{if(!t)return null;let e="all"===a?t.all:t[a];if("all"===n.type){let t=e.data,a=t.reduce((e,t)=>e+(t.codAmount||0),0),s=t.reduce((e,t)=>e+(t.serviceCharge||0),0),r=t.reduce((e,t)=>e+(t.totalCost||0),0),l=t.reduce((e,t)=>e+(t.rtsFee||0),0),n=["CANCELLED","PROBLEMATIC","RETURNED"],i=t.filter(e=>n.includes(e.normalizedStatus)),o=i.reduce((e,t)=>e+(t.totalCost||0),0),d=i.reduce((e,t)=>e+(t.rtsFee||0),0),c=a-r;return{totalCOD:a,totalServiceCharge:s,totalShippingCost:r,totalRTSFee:l,rtsParcelsCount:i.length,rtsShippingCost:o,rtsFeeLost:d,grossProfit:c,netProfit:c-o-d}}let s=e.data.filter(e=>{if("province"===n.type)return e.province.toLowerCase().includes(n.value.toLowerCase());if("month"===n.type){let t;if(!e.date)return!1;try{let a;if(a=new Date("number"==typeof e.date?Date.UTC(1899,11,30)+864e5*e.date:e.date.toString().trim()),isNaN(a.getTime())){let a=e.date.toString().split(" ")[0].split("-");t=Number.parseInt(a[1],10)}else t=a.getMonth()+1}catch(a){t=Number.parseInt(e.date.toString().split(" ")[0].split("-")[1],10)}return t===Number.parseInt(n.value,10)}if("year"===n.type){let t;if(!e.date)return!1;try{let a;if(a=new Date("number"==typeof e.date?Date.UTC(1899,11,30)+864e5*e.date:e.date.toString().trim()),isNaN(a.getTime())){let a=e.date.toString().split(" ")[0].split("-");t=Number.parseInt(a[0],10)}else t=a.getFullYear()}catch(a){t=Number.parseInt(e.date.toString().split(" ")[0].split("-")[0],10)}return t===Number.parseInt(n.value,10)}return!0}),r=s.reduce((e,t)=>e+(t.codAmount||0),0),l=s.reduce((e,t)=>e+(t.serviceCharge||0),0),i=s.reduce((e,t)=>e+(t.totalCost||0),0),o=s.reduce((e,t)=>e+(t.rtsFee||0),0),d=["CANCELLED","PROBLEMATIC","RETURNED"],c=s.filter(e=>d.includes(e.normalizedStatus)),m=c.reduce((e,t)=>e+(t.totalCost||0),0),u=c.reduce((e,t)=>e+(t.rtsFee||0),0),x=r-i;return{totalCOD:r,totalServiceCharge:l,totalShippingCost:i,totalRTSFee:o,rtsParcelsCount:c.length,rtsShippingCost:m,rtsFeeLost:u,grossProfit:x,netProfit:x-m-u}},[t,a,n]);return t?(0,s.jsxs)("div",{className:"p-8 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"FINANCIAL IMPACT REPORT"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Comprehensive financial analysis and RTS cost impact"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(b,{variant:"all"===a?"default":"outline",onClick:()=>l("all"),className:"font-medium",children:"All Regions"}),(0,s.jsx)(b,{variant:"luzon"===a?"default":"outline",onClick:()=>l("luzon"),className:"font-medium",children:"Luzon"}),(0,s.jsx)(b,{variant:"visayas"===a?"default":"outline",onClick:()=>l("visayas"),className:"font-medium",children:"Visayas"}),(0,s.jsx)(b,{variant:"mindanao"===a?"default":"outline",onClick:()=>l("mindanao"),className:"font-medium",children:"Mindanao"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-foreground",children:"Filter:"}),(0,s.jsxs)("select",{value:n.type,onChange:e=>{i({type:e.target.value,value:""})},className:"px-3 py-1.5 text-sm bg-secondary border border-border rounded-md text-foreground",children:[(0,s.jsx)("option",{value:"all",children:"All"}),(0,s.jsx)("option",{value:"province",children:"Province"}),(0,s.jsx)("option",{value:"month",children:"Month"}),(0,s.jsx)("option",{value:"year",children:"Year"})]}),"province"===n.type&&(0,s.jsx)(y,{type:"text",placeholder:"Enter province name",value:n.value,onChange:e=>i({...n,value:e.target.value}),className:"w-48 h-9 text-sm"}),"month"===n.type&&(0,s.jsxs)("select",{value:n.value,onChange:e=>i({...n,value:e.target.value}),className:"px-3 py-1.5 text-sm bg-secondary border border-border rounded-md text-foreground",children:[(0,s.jsx)("option",{value:"",children:"Select month"}),Array.from({length:12},(e,t)=>(0,s.jsx)("option",{value:String(t+1).padStart(2,"0"),children:new Date(2e3,t).toLocaleString("default",{month:"long"})},t+1))]}),"year"===n.type&&(0,s.jsxs)("select",{value:n.value,onChange:e=>i({...n,value:e.target.value}),className:"px-3 py-1.5 text-sm bg-secondary border border-border rounded-md text-foreground",children:[(0,s.jsx)("option",{value:"",children:"Select year"}),Array.from({length:new Date().getFullYear()-1999},(e,t)=>(0,s.jsx)("option",{value:String(2e3+t),children:2e3+t},2e3+t))]}),(0,s.jsx)(b,{size:"sm",onClick:()=>{if("all"!==n.type&&!n.value){alert("Please enter or select a value to filter.");return}},className:"h-9",children:"Apply"}),(0,s.jsx)(b,{size:"sm",variant:"outline",onClick:()=>i({type:"all",value:""}),className:"h-9 bg-transparent",children:"Clear"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsxs)("div",{className:"glass rounded-xl p-6 border border-border/50",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsx)(u.Z,{className:"w-8 h-8 text-green-500"})}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Total COD Amount"}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-foreground",children:["₱",(null==o?void 0:o.totalCOD.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]}),(0,s.jsxs)("div",{className:"glass rounded-xl p-6 border border-border/50",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsx)(u.Z,{className:"w-8 h-8 text-blue-500"})}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Total Service Charge"}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-foreground",children:["₱",(null==o?void 0:o.totalServiceCharge.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]}),(0,s.jsxs)("div",{className:"glass rounded-xl p-6 border border-border/50",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsx)(u.Z,{className:"w-8 h-8 text-primary"})}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Total Shipping Cost"}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-foreground",children:["₱",(null==o?void 0:o.totalShippingCost.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]}),(0,s.jsxs)("div",{className:"glass rounded-xl p-6 border border-border/50",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsx)(u.Z,{className:"w-8 h-8 text-orange-500"})}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Total RTS Fee (20%)"}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-foreground",children:["₱",(null==o?void 0:o.totalRTSFee.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"glass rounded-xl p-6 border border-green-500/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)(d.Z,{className:"w-6 h-6 text-green-500"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"Gross Profit"})]}),(0,s.jsxs)("p",{className:"text-4xl font-bold text-green-500 mb-2",children:["₱",(null==o?void 0:o.grossProfit.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total COD - Shipping Costs"})]}),(0,s.jsxs)("div",{className:"glass rounded-xl p-6 border border-blue-500/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)(Y.Z,{className:"w-6 h-6 text-blue-500"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"Net Profit"})]}),(0,s.jsxs)("p",{className:"text-4xl font-bold text-blue-500 mb-2",children:["₱",(null==o?void 0:o.netProfit.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Gross Profit - RTS Impact"})]})]}),(0,s.jsxs)("div",{className:"glass rounded-xl p-6 border border-red-500/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)(F.Z,{className:"w-6 h-6 text-red-500"}),(0,s.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"RTS Financial Impact"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"p-4 rounded-lg bg-red-500/10",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"RTS Parcels"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-foreground",children:(null==o?void 0:o.rtsParcelsCount.toLocaleString())||0})]}),(0,s.jsxs)("div",{className:"p-4 rounded-lg bg-red-500/10",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"RTS Shipping Cost Lost"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-red-500",children:["₱",(null==o?void 0:o.rtsShippingCost.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]}),(0,s.jsxs)("div",{className:"p-4 rounded-lg bg-red-500/10",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"RTS Fee Impact"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-red-500",children:["₱",(null==o?void 0:o.rtsFeeLost.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]})]})]}),(0,s.jsxs)("div",{className:"glass rounded-xl p-6 border border-border/50",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-foreground mb-4",children:"Financial Summary"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-secondary/30",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue Potential (COD)"}),(0,s.jsxs)("span",{className:"text-sm font-bold text-foreground",children:["₱",(null==o?void 0:o.totalCOD.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-secondary/30",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Total Operational Cost"}),(0,s.jsxs)("span",{className:"text-sm font-bold text-foreground",children:["₱",(null==o?void 0:o.totalShippingCost.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-secondary/30",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Gross Profit"}),(0,s.jsxs)("span",{className:"text-sm font-bold text-green-500",children:["₱",(null==o?void 0:o.grossProfit.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-secondary/30",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"RTS Cost Impact"}),(0,s.jsxs)("span",{className:"text-sm font-bold text-red-500",children:["-₱",(null==o?void 0:o.rtsShippingCost.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-primary/20 border border-primary/50",children:[(0,s.jsx)("span",{className:"text-base font-bold text-foreground",children:"Net Profit"}),(0,s.jsxs)("span",{className:"text-base font-bold text-primary",children:["₱",(null==o?void 0:o.netProfit.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]})]})]})]}):(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(u.Z,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"No Data Available"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Upload data to view financial impact analysis"})]})})}var K=a(9247),q=a(1207);function G(e){let{...t}=e;return(0,s.jsx)(K.fC,{"data-slot":"dialog",...t})}function X(e){let{...t}=e;return(0,s.jsx)(K.h_,{"data-slot":"dialog-portal",...t})}function H(e){let{className:t,...a}=e;return(0,s.jsx)(K.aV,{"data-slot":"dialog-overlay",className:f("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function Q(e){let{className:t,children:a,showCloseButton:r=!0,...l}=e;return(0,s.jsxs)(X,{"data-slot":"dialog-portal",children:[(0,s.jsx)(H,{}),(0,s.jsxs)(K.VY,{"data-slot":"dialog-content",className:f("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...l,children:[a,r&&(0,s.jsxs)(K.x8,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(q.Z,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function J(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:f("flex flex-col gap-2 text-center sm:text-left",t),...a})}function W(e){let{className:t,...a}=e;return(0,s.jsx)(K.Dx,{"data-slot":"dialog-title",className:f("text-lg leading-none font-semibold",t),...a})}var $=a(3364),ee=a(6264),et=a(5147);let ea={luzon:{name:"Luzon",regions:["NCR","CAR","Region I","Region II","Region III","Region IV-A","Region IV-B","Region V"],provinces:{NCR:["Manila","Quezon City","Caloocan","Las Pi\xf1as","Makati","Malabon","Mandaluyong","Marikina","Muntinlupa","Navotas","Para\xf1aque","Pasay","Pasig","Pateros","San Juan","Taguig","Valenzuela"],CAR:["Abra","Apayao","Benguet","Ifugao","Kalinga","Mountain Province","Baguio City"],"Region I":["Ilocos Norte","Ilocos Sur","La Union","Pangasinan","Dagupan City","San Carlos City","Alaminos City","Urdaneta City","Candon City","Vigan City"],"Region II":["Batanes","Cagayan","Isabela","Nueva Vizcaya","Quirino","Santiago City","Tuguegarao City","Cauayan City"],"Region III":["Aurora","Bataan","Bulacan","Nueva Ecija","Pampanga","Tarlac","Zambales","Angeles City","Olongapo City","San Jose City","Cabanatuan City","Mabalacat City","Malolos City","Meycauayan City","San Fernando City"],"Region IV-A":["Batangas","Cavite","Laguna","Quezon","Rizal","Lucena City","Antipolo City","Bacoor City","Calamba City","San Pablo City","Santa Rosa City","Tanauan City","Lip\xe1 City","Batangas City","Imus City","Dasmari\xf1as City","General Trias City"],"Region IV-B":["Marinduque","Occidental Mindoro","Oriental Mindoro","Palawan","Romblon","Puerto Princesa City","Calapan City"],"Region V":["Albay","Camarines Norte","Camarines Sur","Catanduanes","Masbate","Sorsogon","Naga City","Legazpi City","Iriga City","Sorsogon City","Ligao City","Tabaco City","Masbate City"]}},visayas:{name:"Visayas",regions:["Region VI","Region VII","Region VIII"],provinces:{"Region VI":["Aklan","Antique","Capiz","Guimaras","Iloilo","Negros Occidental","Bacolod City","Iloilo City","Roxas City","San Carlos City","Cadiz City","Sagay City","Silay City","Tal\xedsay City","Victorias City"],"Region VII":["Bohol","Cebu","Siquijor","Negros Oriental","Cebu City","Lapu-Lapu City","Mandaue City","Talisay City","Toledo City","Dumaguete City","Tagbilaran City","Bais City","Bayawan City","Canlaon City","Tanjay City"],"Region VIII":["Biliran","Eastern Samar","Leyte","Northern Samar","Samar","Southern Leyte","Ormoc City","Tacloban City","Calbayog City","Catbalogan City","Borongan City","Baybay City","Maasin City"]}},mindanao:{name:"Mindanao",regions:["Region IX","Region X","Region XI","Region XII","Region XIII","BARMM"],provinces:{"Region IX":["Zamboanga del Norte","Zamboanga del Sur","Zamboanga Sibugay","Zamboanga City","Isabela City","Dapitan City","Dipolog City","Pagadian City"],"Region X":["Bukidnon","Camiguin","Lanao del Norte","Misamis Occidental","Misamis Oriental","Cagayan de Oro City","Iligan City","El Salvador City","Gingoog City","Malaybalay City","Valencia City","Oroquieta City","Ozamiz City","Tangub City"],"Region XI":["Davao de Oro","Davao del Norte","Davao del Sur","Davao Occidental","Davao Oriental","Davao City","Panabo City","Samal City","Tagum City","Digos City","Mati City"],"Region XII":["Cotabato","Sarangani","South Cotabato","Sultan Kudarat","General Santos City","Koronadal City","Kidapawan City","Tacurong City"],"Region XIII":["Agusan del Norte","Agusan del Sur","Dinagat Islands","Surigao del Norte","Surigao del Sur","Butuan City","Surigao City","Bislig City","Bayugan City","Cabadbaran City","Tandag City"],BARMM:["Basilan","Lanao del Sur","Maguindanao","Sulu","Tawi-Tawi","Cotabato City","Lamitan City","Marawi City"]}}},es=["DELIVERED","ONDELIVERY","PICKUP","INTRANSIT","CANCELLED","DETAINED","PROBLEMATIC","RETURNED"];function er(){let e={};return es.forEach(t=>{e[t]={count:0,locations:{}}}),{data:[],stats:e,provinces:{},regions:{},total:0,winningShippers:{},rtsShippers:{}}}async function el(e){return new Promise((t,a)=>{let s=new FileReader;s.onload=e=>{try{var s;let a=null===(s=e.target)||void 0===s?void 0:s.result,r=et.ij(a,{type:"array"}),l=[];r.SheetNames.forEach(e=>{let t=r.Sheets[e],a=et.P6.sheet_to_json(t,{header:1});a.length>1&&(l=0===l.length?a:l.concat(a.slice(1)))});let n=function(e){e[0];let t=e.slice(1),a={all:er(),luzon:er(),visayas:er(),mindanao:er()};return t.forEach(e=>{if(e.length<14)return;let t=(e[2]||"").toString().toUpperCase().trim(),s=function(e){let t=e.toUpperCase().trim();return"DELIVERED"===t?"DELIVERED":"ON DELIVERY"===t||"ONDELIVERY"===t?"ONDELIVERY":"PICK UP"===t||"PICKUP"===t||"PICKED UP"===t?"PICKUP":"IN TRANSIT"===t||"INTRANSIT"===t?"INTRANSIT":"CANCELLED"===t?"CANCELLED":"DETAINED"===t?"DETAINED":"PROBLEMATIC"===t||"PROBLEMATIC PROCESSING"===t?"PROBLEMATIC":"RETURNED"===t?"RETURNED":"OTHER"}(t),r=e[5]||"",l=e[13]||"",n=e[0]||"",i=Number.parseFloat(e[17])||0,o=Number.parseFloat(e[18])||0,d=Number.parseFloat(e[19])||0;if(!t||!l)return;let c=function(e){let t=(e||"").toUpperCase().trim();for(let[e,a]of Object.entries(ea))for(let[s,r]of Object.entries(a.provinces))for(let a of r)if(t.includes(a.toUpperCase()))return{island:e,region:s,province:a};return t.includes("LUZON")||t.includes("NCR")||t.includes("CAR")?{island:"luzon",region:"Unknown",province:"Unknown"}:t.includes("VISAYAS")?{island:"visayas",region:"Unknown",province:"Unknown"}:t.includes("MINDANAO")?{island:"mindanao",region:"Unknown",province:"Unknown"}:{island:"unknown",region:"Unknown",province:"Unknown"}}(l),m=c.island,u={status:t,normalizedStatus:s,shipper:r,consigneeRegion:l,province:c.province,region:c.region,island:m,date:n,codAmount:i,serviceCharge:o,totalCost:d,rtsFee:.2*d};if("unknown"!==m){if(a.all.data.push(u),a.all.total++,a[m]&&(a[m].data.push(u),a[m].total++),"Unknown"!==c.province&&(a.all.provinces[c.province]=(a.all.provinces[c.province]||0)+1,a.all.regions[c.region]=(a.all.regions[c.region]||0)+1,a[m]&&(a[m].provinces[c.province]=(a[m].provinces[c.province]||0)+1,a[m].regions[c.region]=(a[m].regions[c.region]||0)+1)),es.includes(s)){a.all.stats[s].count++,a[m]&&a[m].stats[s].count++;let e=c.province;"Unknown"!==e&&(a.all.stats[s].locations[e]=(a.all.stats[s].locations[e]||0)+1,a[m]&&(a[m].stats[s].locations[e]=(a[m].stats[s].locations[e]||0)+1))}"DELIVERED"===s&&(a.all.winningShippers[r]=(a.all.winningShippers[r]||0)+1,a[m]&&(a[m].winningShippers[r]=(a[m].winningShippers[r]||0)+1)),["CANCELLED","PROBLEMATIC","RETURNED"].includes(s)&&(a.all.rtsShippers[r]=(a.all.rtsShippers[r]||0)+1,a[m]&&(a[m].rtsShippers[r]=(a[m].rtsShippers[r]||0)+1))}}),a}(l);t(n)}catch(e){a(e)}},s.onerror=()=>{a(Error("Failed to read file"))},s.readAsArrayBuffer(e)})}function en(e){let{onDataUpload:t}=e,[a,l]=(0,r.useState)(null),[n,i]=(0,r.useState)(!1),o=(0,r.useRef)(null),d=async()=>{if(a){i(!0);try{let e=await el(a);t(e)}catch(e){console.error("Error processing file:",e),alert("Error processing file. Please check the format.")}finally{i(!1)}}};return(0,s.jsxs)("div",{className:"glass-strong rounded-2xl p-6 border border-border/50 relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary/5 rounded-full blur-3xl"}),(0,s.jsxs)("div",{className:"relative flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("input",{ref:o,type:"file",accept:".xlsx,.xls",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&l(a)},className:"hidden",id:"file-upload"}),(0,s.jsx)("label",{htmlFor:"file-upload",className:"flex items-center gap-3 px-5 py-4 glass rounded-xl cursor-pointer transition-all hover:border-primary/50 group",children:a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg gradient-orange flex items-center justify-center",children:(0,s.jsx)($.Z,{className:"w-5 h-5 text-primary-foreground"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("span",{className:"text-sm font-semibold text-foreground block",children:a.name}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Ready to process"})]}),(0,s.jsx)(ee.Z,{className:"w-5 h-5 text-primary"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg glass border border-border/50 flex items-center justify-center group-hover:border-primary/50 transition-colors",children:(0,s.jsx)(c.Z,{className:"w-5 h-5 text-muted-foreground group-hover:text-primary transition-colors"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("span",{className:"text-sm font-semibold text-foreground block",children:"Select Excel File"}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Click to browse files"})]})]})})]}),a&&(0,s.jsx)(b,{onClick:()=>{l(null),o.current&&(o.current.value="")},variant:"outline",size:"icon",className:"glass border-border/50 hover:border-destructive/50 hover:text-destructive transition-all bg-transparent",children:(0,s.jsx)(q.Z,{className:"w-4 h-4"})}),(0,s.jsx)(b,{onClick:d,disabled:!a||n,className:"gradient-orange hover:opacity-90 text-primary-foreground font-semibold px-6 shadow-lg shadow-primary/20 transition-all disabled:opacity-50",children:n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-primary-foreground/30 border-t-primary-foreground rounded-full animate-spin mr-2"}),"Processing..."]}):"Upload & Process"})]}),(0,s.jsxs)("p",{className:"mt-4 text-xs text-muted-foreground flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-1 h-1 rounded-full bg-primary"}),"Expected columns: Date, Status, Shipper, Consignee Region"]})]})}function ei(e){let{open:t,onOpenChange:a,onDataUpload:r}=e;return(0,s.jsx)(G,{open:t,onOpenChange:a,children:(0,s.jsxs)(Q,{className:"sm:max-w-2xl glass-strong border-border/50",children:[(0,s.jsx)(J,{children:(0,s.jsx)(W,{className:"text-2xl font-bold text-foreground",children:"Upload Excel Data"})}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(en,{onDataUpload:e=>{r(e),a(!1)}})})]})})}function eo(){let[e,t]=(0,r.useState)(null),[a,l]=(0,r.useState)(!1),[n,i]=(0,r.useState)("dashboard");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j,{onUploadClick:()=>l(!0),hasData:!!e,currentView:n,onViewChange:i,children:(()=>{switch(n){case"performance":return(0,s.jsx)(U,{data:e});case"analytical":return(0,s.jsx)(Z,{data:e});case"financial":return(0,s.jsx)(_,{data:e});default:return(0,s.jsx)(M,{data:e,onDataChange:t,onUploadClick:()=>l(!0)})}})()}),(0,s.jsx)(ei,{open:a,onOpenChange:l,onDataUpload:t})]})}}},function(e){e.O(0,[531,130,24,240,744],function(){return e(e.s=1447)}),_N_E=e.O()}]);